<% content_for(:title, "Administration - Lessons") %>

<main class="main">
  <nav class="admin-nav">
    <ul class="admin-ul">
      <li><%= link_to "Administration", {:controller => "administration", :action => "index"}, class: "admin-link" %></li>
      <li><%= link_to "Buildings", {:controller => "administration", :action => "buildings"}, class: "admin-link" %></li>
      <li><%= link_to "Rooms", {:controller => "administration", :action => "rooms"}, class: "admin-link" %></li>
      <li><%= link_to "Teachers", {:controller => "administration", :action => "teachers"}, class: "admin-link" %></li>
      <li><%= link_to "Students", {:controller => "administration", :action => "students"}, class: "admin-link" %></li>
      <li><%= link_to "Lessons", {:controller => "administration", :action => "lessons"}, class: "admin-link" %></li>
      <li><%= link_to "Courses", {:controller => "administration", :action => "courses"}, class: "admin-link" %></li>
    </ul>
  </nav>

  <div>
    <% if flash[:errors] %>
      <% flash[:errors].each do |e|%>
        <p><%= e %></p>
      <% end %>
    <%end %>

    <div class="grid-schedule">
      <h1>Lessons - <%= link_to "Create new lesson", new_lesson_path, class: "admin-link" %></h1>
      <section class="grid-table">
        <table class="table-schedule">
          <thead>
          <tr class="table-head">
            <th>ID</th>
            <th>Start_at</th>
            <th>End_at</th>
            <th>Duration</th>
            <th>Room</th>
            <th>Teacher</th>
            <th>Course</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
          </thead>
          <tbody>
          <% @lessons.each do |lesson| %>
            <tr class="tr-hover">
              <td><%= lesson.id %></td>
              <td><%= lesson.start_at %></td>
              <td><%= lesson.end_at %></td>
              <td><%= lesson.duration %></td>
              <td><%= lesson.room.title %></td>
              <td><%= lesson.teacher.first_name + " " + lesson.teacher.last_name %></td>
              <td><%= lesson.course.title %></td>
              <td><%= link_to "Edit", edit_lesson_path(lesson.id), class: "admin-link" %></td>
              <td>
                <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
                <%= link_to "Delete", lesson_path(id: lesson.id, authenticity_token: form_authenticity_token), data: {method: :delete, confirm: "are you sure?"}, class: "admin-link" %></td>
            </tr>
          <% end %>

          </tbody>
        </table>
      </section>
    </div>

  </div>

</main>